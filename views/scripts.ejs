<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

<script>
//==========================================================================================================//
            //funções responsáveis pelo menu

            const menu = document.querySelector("#menu");
            const divMenu = document.querySelector("#divMenu");
            const divPrinc = document.querySelector("#principal");
            const footer = document.querySelector("#footer");

            menu.addEventListener("click", () => {
                menu.classList.toggle("active");
                setTimeout(function(){
                    divMenu.classList.toggle("rem");
                },100);
                setTimeout(function(){
                    divMenu.classList.toggle("ativado");
                    divPrinc.classList.toggle("ocult");
                    divPrinc.classList.toggle("blc");
                    footer.classList.toggle("ocult");
                    footer.classList.toggle("blc");
                },200);
                divPrinc.classList.toggle("ocultar");
                footer.classList.toggle("ocultar");
            });

            //End das funções responsáveis pelo menu
    
//==========================================================================================================//

            //funções responsáveis pelo formulario

                //funções para ocultar caso ja esteja logado

                const form = document.querySelector("#divForm");
                const nav = document.querySelector("#nav");

                axios.get(`http://localhost:3000/log`).then(res => {
                    console.log(form);
                    if(res.data === true){
                        alert("teste");
                        console.log("logado: ", res.data)
                        form.classList.toggle("ocult");
                        form.classList.toggle("divForm");
                    } else {
                        nav.classList.toggle("ocult");
                    }
                }).catch(erro => {
                    console.log(erro);
                })

                //end das funções de ocultar caso esteja logado

                //funções para mudar cad/log

                const muda = document.querySelector("#muda");
                const muda2 = document.querySelector("#muda2");
                const cad = document.querySelector("#cad");
                const formu = document.querySelector("#form")
                const log = document.querySelector("#log");
                const formu2 = document.querySelector("#form2");

                muda.addEventListener("click", () => {
                    formu.classList.toggle("ocult");
                    cad.classList.toggle("ocult");
                    formu2.classList.toggle("ocult");
                    log.classList.toggle("ocult");
                });

                muda2.addEventListener("click", () => {
                    formu.classList.toggle("ocult");
                    cad.classList.toggle("ocult");
                    formu2.classList.toggle("ocult");
                    log.classList.toggle("ocult");
                });

//==========================================================================================================//

            //funções responsáveis pelo logoff

            function deslog(){
                console.log("teste")
                axios.get(`http://localhost:3000/deslog`);
            }

//==========================================================================================================//
            //funções responsáveis pela barra de pesquisa

            const pesq = document.querySelector("#input");

            pesq.addEventListener('keydown', function(event) {
 
                var tecla = event.keyCode;
                if (tecla === 13) {
                    pesquisa();
                }
            })

            function pesquisa(){
                const input = document.getElementById("input")
                const div = document.getElementById("main");
                const br = document.createElement("br");
                const br2 = document.createElement("br");
                div.innerHTML = "";
                axios.get(`http://localhost:5000/produtos/?nome_like=${input.value}`).then(res => {
                    console.log(res.data[0]); //AJUSTAR PRO NOSSO BANCO DE DADOS // VOU CRIAR UM DB PRA COLOCAR OS TEXTOS DA PAGINA, AI QUANDO A PESSOA PESQUISAR ALGO, EU USO O LIKE E PEGO O DADO, NESSE MESMO DADO TEM Q HAVER UM CAMPO COM O LINK PRA EU COLOCAR E O NOME DE EXIBIÇÃO
                    var nome = [];
                    var desc = [];
                    var preco = [];
                    var divs = [];
                    for(let i = 0; i < res.data.length; i++){
                        divs[i] = document.createElement("div");
                        nome[i] = document.createTextNode("Lanche: " + res.data[i].nome);
                        desc[i] = document.createTextNode("\nDescrição: " + res.data[i].descricao);
                        preco[i] = document.createTextNode("\nPreço: " + res.data[i].preco);
                        divs[i].appendChild(nome[i]);
                        divs[i].appendChild(br);
                        divs[i].appendChild(desc[i]);
                        divs[i].appendChild(br);
                        divs[i].appendChild(preco[i]);
                        divs[i].appendChild(br);
                        divs[i].appendChild(br2);

                        div.appendChild(divs[i]);
                    }
                   
                   
                });
            }

            //End das funções responsáveis pela barra de pesquisa
//==========================================================================================================//
</script>